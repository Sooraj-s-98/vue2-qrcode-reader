import{_ as f}from"./chunks/camera.590ea3a8.js";import{_ as g}from"./chunks/QrcodeStream.vue_vue_type_script_setup_true_lang.33523f55.js";import{_ as q,C as x,o as r,c as E,k as c,a as y,a3 as d,a4 as F,F as u,D as C,t as B,H as i,d as m,w as A,Q as D}from"./chunks/framework.9fcc70a7.js";const _={components:{QrcodeStream:g},data(){const o=[{text:"nothing (default)",value:void 0},{text:"outline",value:this.paintOutline},{text:"centered text",value:this.paintCenterText},{text:"bounding box",value:this.paintBoundingBox}];return{selected:o[1],options:o,selectedBarcodeTypes:["qr_code"],barcodeTypes:["aztec","code_128","code_39","code_93","codabar","data_matrix","ean_13","ean_8","itf","pdf417","qr_code","upc_a","upc_e"]}},methods:{paintOutline(o,s){for(const p of o){const[n,...a]=p.cornerPoints;s.strokeStyle="red",s.beginPath(),s.moveTo(n.x,n.y);for(const{x:e,y:t}of a)s.lineTo(e,t);s.lineTo(n.x,n.y),s.closePath(),s.stroke()}},paintBoundingBox(o,s){for(const p of o){const{boundingBox:{x:n,y:a,width:e,height:t}}=p;s.lineWidth=2,s.strokeStyle="#007bff",s.strokeRect(n,a,e,t)}},paintCenterText(o,s){for(const p of o){const{boundingBox:n,rawValue:a}=p,e=n.x+n.width/2,t=n.y+n.height/2,l=Math.max(12,50*n.width/s.canvas.width);console.log(n.width,s.canvas.width),s.font=`bold ${l}px sans-serif`,s.textAlign="center",s.lineWidth=3,s.strokeStyle="#35495e",s.strokeText(p.rawValue,e,t),s.fillStyle="#5cb984",s.fillText(a,e,t)}},logErrors:console.error}},v=["value"],b=["value"];function T(o,s,p,n,a,e){const t=x("qrcode-stream");return r(),E("div",null,[c("p",null,[y(" Barcodeformat: "),d(c("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.selectedBarcodeTypes=l),multiple:""},[(r(!0),E(u,null,C(a.barcodeTypes,(l,h)=>(r(),E("option",{key:h,value:l},B(l),9,v))),128))],512),[[F,a.selectedBarcodeTypes]])]),c("p",null,[y(" Track function: "),d(c("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>a.selected=l)},[(r(!0),E(u,null,C(a.options,l=>(r(),E("option",{key:l.text,value:l},B(l.text),9,b))),128))],512),[[F,a.selected]])]),i(t,{formats:a.selectedBarcodeTypes,track:a.selected.value,onError:e.logErrors},null,8,["formats","track","onError"])])}const k=q(_,[["render",T]]),w=c("h1",{id:"visual-tracking-with-formats",tabindex:"-1"},[y("Visual Tracking with Formats "),c("a",{class:"header-anchor",href:"#visual-tracking-with-formats","aria-label":'Permalink to "Visual Tracking with Formats"'},"​")],-1),P=c("p",null,"Hold a Barcode / QR code into view of the camera. It should be visually highlighted in real-time. Use the format function select below to change the format. Use the track function select below to change the flavor.",-1),S=D(`<h3 id="source" tabindex="-1">Source <a class="header-anchor" href="#source" aria-label="Permalink to &quot;Source&quot;">​</a></h3><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      Barcodeformat:</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">v-model</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;selectedBarcodeTypes&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">multiple</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">v-for</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;(option, index) in barcodeTypes&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:key</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;index&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:value</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;option&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          {{ option }}</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;/</span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">select</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      Track function:</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">v-model</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;selected&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">v-for</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;option in options&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:key</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;option.text&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:value</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;option&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          {{ option.text }}</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;/</span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">select</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">qrcode-stream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:formats</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;selectedBarcodeTypes&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:track</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;selected.value&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@error</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;logErrors&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { QrcodeStream } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;../../../../src&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  components: { QrcodeStream },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">data</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">options</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">      { text: </span><span style="color:#9ECBFF;">&#39;nothing (default)&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#79B8FF;">undefined</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { text: </span><span style="color:#9ECBFF;">&#39;outline&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.paintOutline },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { text: </span><span style="color:#9ECBFF;">&#39;centered text&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.paintCenterText },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { text: </span><span style="color:#9ECBFF;">&#39;bounding box&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.paintBoundingBox }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">selected</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> options[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">barcodeTypes</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;aztec&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;code_128&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;code_39&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;code_93&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;codabar&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;data_matrix&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;ean_13&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;ean_8&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;itf&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;pdf417&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;qr_code&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;upc_a&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;upc_e&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">selectedBarcodeTypes</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;qr_code&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> { selected, options, selectedBarcodeTypes, barcodeTypes}</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">paintOutline</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">detectedCodes</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">ctx</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">detectedCode</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">of</span><span style="color:#E1E4E8;"> detectedCodes) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">firstPoint</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">otherPoints</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> detectedCode.cornerPoints</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.strokeStyle </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;red&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.</span><span style="color:#B392F0;">beginPath</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.</span><span style="color:#B392F0;">moveTo</span><span style="color:#E1E4E8;">(firstPoint.x, firstPoint.y)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">x</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">y</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">of</span><span style="color:#E1E4E8;"> otherPoints) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          ctx.</span><span style="color:#B392F0;">lineTo</span><span style="color:#E1E4E8;">(x, y)</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.</span><span style="color:#B392F0;">lineTo</span><span style="color:#E1E4E8;">(firstPoint.x, firstPoint.y)</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.</span><span style="color:#B392F0;">closePath</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.</span><span style="color:#B392F0;">stroke</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">paintBoundingBox</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">detectedCodes</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">ctx</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">detectedCode</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">of</span><span style="color:#E1E4E8;"> detectedCodes) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#FFAB70;">boundingBox</span><span style="color:#E1E4E8;">: { </span><span style="color:#79B8FF;">x</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">y</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">width</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">height</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> detectedCode</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.lineWidth </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.strokeStyle </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#007bff&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.</span><span style="color:#B392F0;">strokeRect</span><span style="color:#E1E4E8;">(x, y, width, height)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">paintCenterText</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">detectedCodes</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">ctx</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">detectedCode</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">of</span><span style="color:#E1E4E8;"> detectedCodes) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">boundingBox</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">rawValue</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> detectedCode</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">centerX</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> boundingBox.x </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> boundingBox.width </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">centerY</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> boundingBox.y </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> boundingBox.height </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">fontSize</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">max</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;">, (</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> boundingBox.width) </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> ctx.canvas.width)</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(boundingBox.width, ctx.canvas.width)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.font </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`bold \${</span><span style="color:#E1E4E8;">fontSize</span><span style="color:#9ECBFF;">}px sans-serif\`</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.textAlign </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;center&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.lineWidth </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.strokeStyle </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#35495e&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.</span><span style="color:#B392F0;">strokeText</span><span style="color:#E1E4E8;">(detectedCode.rawValue, centerX, centerY)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.fillStyle </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#5cb984&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">        ctx.</span><span style="color:#B392F0;">fillText</span><span style="color:#E1E4E8;">(rawValue, centerX, centerY)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    logErrors: console.error</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      Barcodeformat:</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">select</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">v-model</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;selectedBarcodeTypes&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">multiple</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">option</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">v-for</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;(option, index) in barcodeTypes&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:key</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;index&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:value</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;option&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">          {{ option }}</span></span>
<span class="line"><span style="color:#24292E;">        &lt;/</span><span style="color:#22863A;">option</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">select</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      Track function:</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">select</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">v-model</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;selected&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">option</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">v-for</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;option in options&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:key</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;option.text&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:value</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;option&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">          {{ option.text }}</span></span>
<span class="line"><span style="color:#24292E;">        &lt;/</span><span style="color:#22863A;">option</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">select</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">qrcode-stream</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:formats</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;selectedBarcodeTypes&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:track</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;selected.value&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">@error</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;logErrors&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { QrcodeStream } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;../../../../src&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  components: { QrcodeStream },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">data</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">options</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      { text: </span><span style="color:#032F62;">&#39;nothing (default)&#39;</span><span style="color:#24292E;">, value: </span><span style="color:#005CC5;">undefined</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      { text: </span><span style="color:#032F62;">&#39;outline&#39;</span><span style="color:#24292E;">, value: </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.paintOutline },</span></span>
<span class="line"><span style="color:#24292E;">      { text: </span><span style="color:#032F62;">&#39;centered text&#39;</span><span style="color:#24292E;">, value: </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.paintCenterText },</span></span>
<span class="line"><span style="color:#24292E;">      { text: </span><span style="color:#032F62;">&#39;bounding box&#39;</span><span style="color:#24292E;">, value: </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.paintBoundingBox }</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">selected</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> options[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">barcodeTypes</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span><span style="color:#032F62;">&quot;aztec&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;code_128&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;code_39&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;code_93&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;codabar&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;data_matrix&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;ean_13&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;ean_8&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;itf&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;pdf417&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;qr_code&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;upc_a&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;upc_e&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">selectedBarcodeTypes</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span><span style="color:#032F62;">&quot;qr_code&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> { selected, options, selectedBarcodeTypes, barcodeTypes}</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  methods: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">paintOutline</span><span style="color:#24292E;">(</span><span style="color:#E36209;">detectedCodes</span><span style="color:#24292E;">, </span><span style="color:#E36209;">ctx</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">detectedCode</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">of</span><span style="color:#24292E;"> detectedCodes) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">firstPoint</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">...</span><span style="color:#005CC5;">otherPoints</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> detectedCode.cornerPoints</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        ctx.strokeStyle </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;red&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        ctx.</span><span style="color:#6F42C1;">beginPath</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">        ctx.</span><span style="color:#6F42C1;">moveTo</span><span style="color:#24292E;">(firstPoint.x, firstPoint.y)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">x</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">y</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">of</span><span style="color:#24292E;"> otherPoints) {</span></span>
<span class="line"><span style="color:#24292E;">          ctx.</span><span style="color:#6F42C1;">lineTo</span><span style="color:#24292E;">(x, y)</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        ctx.</span><span style="color:#6F42C1;">lineTo</span><span style="color:#24292E;">(firstPoint.x, firstPoint.y)</span></span>
<span class="line"><span style="color:#24292E;">        ctx.</span><span style="color:#6F42C1;">closePath</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">        ctx.</span><span style="color:#6F42C1;">stroke</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">paintBoundingBox</span><span style="color:#24292E;">(</span><span style="color:#E36209;">detectedCodes</span><span style="color:#24292E;">, </span><span style="color:#E36209;">ctx</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">detectedCode</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">of</span><span style="color:#24292E;"> detectedCodes) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#E36209;">boundingBox</span><span style="color:#24292E;">: { </span><span style="color:#005CC5;">x</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">y</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">width</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">height</span><span style="color:#24292E;"> }</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> detectedCode</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        ctx.lineWidth </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">        ctx.strokeStyle </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#007bff&#39;</span></span>
<span class="line"><span style="color:#24292E;">        ctx.</span><span style="color:#6F42C1;">strokeRect</span><span style="color:#24292E;">(x, y, width, height)</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">paintCenterText</span><span style="color:#24292E;">(</span><span style="color:#E36209;">detectedCodes</span><span style="color:#24292E;">, </span><span style="color:#E36209;">ctx</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">detectedCode</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">of</span><span style="color:#24292E;"> detectedCodes) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">boundingBox</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">rawValue</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> detectedCode</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">centerX</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> boundingBox.x </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> boundingBox.width </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">centerY</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> boundingBox.y </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> boundingBox.height </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">fontSize</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">max</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">12</span><span style="color:#24292E;">, (</span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> boundingBox.width) </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> ctx.canvas.width)</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(boundingBox.width, ctx.canvas.width)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        ctx.font </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`bold \${</span><span style="color:#24292E;">fontSize</span><span style="color:#032F62;">}px sans-serif\`</span></span>
<span class="line"><span style="color:#24292E;">        ctx.textAlign </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;center&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        ctx.lineWidth </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span></span>
<span class="line"><span style="color:#24292E;">        ctx.strokeStyle </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#35495e&#39;</span></span>
<span class="line"><span style="color:#24292E;">        ctx.</span><span style="color:#6F42C1;">strokeText</span><span style="color:#24292E;">(detectedCode.rawValue, centerX, centerY)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        ctx.fillStyle </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;#5cb984&#39;</span></span>
<span class="line"><span style="color:#24292E;">        ctx.</span><span style="color:#6F42C1;">fillText</span><span style="color:#24292E;">(rawValue, centerX, centerY)</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    logErrors: console.error</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre></div>`,2),Q=JSON.parse('{"title":"Visual Tracking with Formats","description":"","frontmatter":{},"headers":[],"relativePath":"demos/CustomTrackingWithFormats.md","filePath":"demos/CustomTrackingWithFormats.md","lastUpdated":1691874207000}'),V={name:"demos/CustomTrackingWithFormats.md"},X=m({...V,setup(o){return(s,p)=>{const n=x("ClientOnly");return r(),E("div",null,[w,P,i(n,null,{default:A(()=>[i(f,{component:k})]),_:1}),S])}}});export{Q as __pageData,X as default};

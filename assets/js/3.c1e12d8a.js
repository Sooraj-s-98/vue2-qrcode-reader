(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{405:function(e,t,n){"use strict";n.d(t,"c",(function(){return H})),n.d(t,"a",(function(){return $})),n.d(t,"b",(function(){return V}));var a,r,i,c=n(463),o=n(37),s=n(79),u=(n(234),n(102),n(33),n(103),n(11),n(111)),d=(n(238),n(235),n(47)),l=n(46),f=n(224),h=n(221),m=n(530),v=(n(24),n(106),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(f.a)(this,t,["can't process cross-origin image"])).name="DropImageFetchError",e}return Object(h.a)(t,e),Object(d.a)(t)}(Object(m.a)(Error))),p=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(f.a)(this,t,["this browser has no Stream API support"])).name="StreamApiNotSupportedError",e}return Object(h.a)(t,e),Object(d.a)(t)}(Object(m.a)(Error)),b=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(f.a)(this,t,["camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."])).name="InsecureContextError",e}return Object(h.a)(t,e),Object(d.a)(t)}(Object(m.a)(Error)),w=n(483),g=function(e){if(e.length>0){var t=Object(u.a)(e,1)[0],n=Object(u.a)(t.cornerPoints,4),a=n[0],r=n[1],i=n[2],c=n[3];return{content:t.rawValue,location:{topLeftCorner:a,topRightCorner:r,bottomRightCorner:i,bottomLeftCorner:c,topLeftFinderPattern:{},topRightFinderPattern:{},bottomLeftFinderPattern:{}},imageData:null}}return{content:null,location:null,imageData:null}},O=function(){var e=Object(s.a)(Object(o.a)().m((function e(t){var n;return Object(o.a)().w((function(e){for(;;)switch(e.n){case 0:if(!t.startsWith("http")||!1!==t.includes(location.host)){e.n=1;break}throw new v;case 1:return(n=document.createElement("img")).src=t,e.n=2,Object(w.a)(n,"load");case 2:return e.a(2,n)}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(Object(o.a)().m((function e(t){var n,a;return Object(o.a)().w((function(e){for(;;)switch(e.n){case 0:return n=new BarcodeDetector({formats:["qr_code"]}),e.n=1,n.detect(t);case 1:return a=e.v,e.a(2,g(a))}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(Object(o.a)().m((function e(t){var n,a,r;return Object(o.a)().w((function(e){for(;;)switch(e.n){case 0:return n=new BarcodeDetector({formats:["qr_code"]}),e.n=1,O(t);case 1:return a=e.v,e.n=2,n.detect(a);case 2:return r=e.v,e.a(2,g(r))}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=(n(48),n(49),n(141),n(23),n(142),n(30),n(464),n(467),n(468),n(469),n(470),n(471),n(522)),D=n(523),x=n(524),C=n(525),S=n(446),R=(a=function(){switch(Object(S.c)(window).browser){case"chrome":Object(y.a)(window);break;case"firefox":Object(x.a)(window);break;case"edge":Object(D.a)(window);break;case"safari":Object(C.a)(window);break;default:throw new p}},r=!1,i=void 0,function(){return r||(i=a.apply(void 0,arguments),r=!0),i}),I=function(){return Object(d.a)((function e(t,n){Object(l.a)(this,e),this.videoEl=t,this.stream=n}),[{key:"stop",value:function(){var e=this;this.videoEl.srcObject=null,this.stream.getTracks().forEach((function(t){e.stream.removeTrack(t),t.stop()}))}},{key:"getCapabilities",value:function(){var e,t,n=this.stream.getVideoTracks(),a=Object(u.a)(n,1)[0];return null!==(e=null==a||null===(t=a.getCapabilities)||void 0===t?void 0:t.call(a))&&void 0!==e?e:{}}}])}(),q=function(){var e=Object(s.a)(Object(o.a)().m((function e(t){var n,a,r,i,c,s;return Object(o.a)().w((function(e){for(;;)switch(e.n){case 0:return n=["OBS Virtual Camera","OBS-Camera","Desk View Camera","Schreibtischansicht-Kamera","Caméra Desk View","Fotocamera di Panoramica Scrivania","Rückseitige Ultra-Weitwinkelkamera","Rückseitige Telefotokamera","Rückseitige Dual-Weitwinkelkamera","Rückseitige Triple-Kamera","Back Dual Wide Camera","Back Triple Camera","Back Ultra Wide Camera","Zadní ultra širokoúhlý fotoaparát","Stolní kamera"],e.n=1,navigator.mediaDevices.enumerateDevices();case 1:if(!((a=e.v.filter((function(e){return"videoinput"===e.kind})).filter((function(e){var t=e.label;return!n.includes(t)})).filter((function(e){return!e.label.includes("infrared")}))).length>2)){e.n=7;break}r=a[0],i=a[a.length-1],c=t,e.n="auto"===c?2:"rear"===c?3:"front"===c?4:5;break;case 2:case 3:return e.a(2,{deviceId:{exact:i.deviceId}});case 4:return e.a(2,{deviceId:{exact:r.deviceId}});case 5:return e.a(2,void 0);case 6:e.n=12;break;case 7:s=t,e.n="auto"===s?8:"rear"===s?9:"front"===s?10:11;break;case 8:return e.a(2,{facingMode:{ideal:"environment"}});case 9:return e.a(2,{facingMode:{exact:"environment"}});case 10:return e.a(2,{facingMode:{exact:"user"}});case 11:return e.a(2,void 0);case 12:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){return L.apply(this,arguments)};function L(){return(L=Object(s.a)(Object(o.a)().m((function e(t,n){var a,r,i,s,d,l,f,h,m,v,g;return Object(o.a)().w((function(e){for(;;)switch(e.n){case 0:if(r=n.camera,i=n.torch,!0===window.isSecureContext){e.n=1;break}throw new b;case 1:if(void 0!==(null===(a=navigator)||void 0===a||null===(a=a.mediaDevices)||void 0===a?void 0:a.getUserMedia)){e.n=2;break}throw new p;case 2:return e.n=3,R();case 3:return m=c.a,v={width:{min:360,ideal:640,max:1920},height:{min:240,ideal:480,max:1080}},e.n=4,q(r);case 4:return g=m(v,e.v),s={audio:!1,video:g},e.n=5,navigator.mediaDevices.getUserMedia(s);case 5:return d=e.v,void 0!==t.srcObject?t.srcObject=d:void 0!==t.mozSrcObject?t.mozSrcObject=d:window.URL.createObjectURL?t.src=window.URL.createObjectURL(d):window.webkitURL?t.src=window.webkitURL.createObjectURL(d):t.src=d,e.n=6,Object(w.a)(t,"loadeddata");case 6:return e.n=7,Object(w.b)(500);case 7:return i&&(l=d.getVideoTracks(),f=Object(u.a)(l,1),h=f[0],h.getCapabilities().torch?h.applyConstraints({advanced:[{torch:!0}]}):console.warn("device does not support torch capability")),e.a(2,new I(t,d))}}),e)})))).apply(this,arguments)}var P=n(526),_={beforeMount:function(){window.BarcodeDetector=P.a},methods:{onDetect:function(e){var t=this;return Object(s.a)(Object(o.a)().m((function n(){var a,r;return Object(o.a)().w((function(n){for(;;)switch(n.p=n.n){case 0:return t.$emit("detect",e),n.p=1,n.n=2,e;case 2:a=n.v,null!==(r=a.content)&&t.$emit("decode",r),n.n=4;break;case 3:n.p=3,n.v;case 4:return n.a(2)}}),n,null,[[1,3]])})))()}}},F=n(78),T=Object(F.a)(_,void 0,void 0,!1,null,null,null).exports,E={name:"qrcode-stream",mixins:[T],props:{camera:{type:String,default:"auto",validator:function(e){return["auto","rear","front","off"].includes(e)}},torch:{type:Boolean,default:!1},track:{type:Function}},data:function(){return{cameraInstance:null,destroyed:!1}},computed:{shouldStream:function(){return!1===this.destroyed&&"off"!==this.camera},shouldScan:function(){return!0===this.shouldStream&&null!==this.cameraInstance},scanInterval:function(){return void 0===this.track?500:40}},watch:{shouldStream:function(e){if(!e){var t=this.$refs.pauseFrame,n=t.getContext("2d"),a=this.$refs.video;t.width=a.videoWidth,t.height=a.videoHeight,n.drawImage(a,0,0,a.videoWidth,a.videoHeight)}},shouldScan:function(e){e&&(this.clearCanvas(this.$refs.pauseFrame),this.clearCanvas(this.$refs.trackingLayer),this.startScanning())},torch:function(){this.init()},camera:function(){this.init()}},mounted:function(){this.init()},beforeDestroy:function(){this.beforeResetCamera(),this.destroyed=!0},methods:{init:function(){var e=this,t=Object(s.a)(Object(o.a)().m((function t(){var n;return Object(o.a)().w((function(t){for(;;)switch(t.n){case 0:if(e.beforeResetCamera(),"off"!==e.camera){t.n=1;break}return e.cameraInstance=null,t.a(2,{capabilities:{}});case 1:return t.n=2,B(e.$refs.video,{camera:e.camera,torch:e.torch});case 2:return e.cameraInstance=t.v,n=e.cameraInstance.getCapabilities(),e.destroyed&&e.cameraInstance.stop(),t.a(2,{capabilities:n});case 3:return t.a(2)}}),t)})))();this.$emit("init",t)},startScanning:function(){var e=this;!function(e,t){var n=new BarcodeDetector({formats:["qr_code"]}),a=t.detectHandler,r=t.locateHandler,i=t.minDelay,c=function(t){return function(){var u=Object(s.a)(Object(o.a)().m((function s(u){var d,l,f,h,m,v,p,b;return Object(o.a)().w((function(o){for(;;)switch(o.n){case 0:if(!(e.readyState>1)){o.n=3;break}if(d=t.lastScanned,l=t.contentBefore,f=t.locationBefore,!(u-d>=i)){o.n=2;break}return o.n=1,n.detect(e);case 1:h=o.v,m=g(h),v=m.content,p=m.location,b=m.imageData,null!==v&&v!==l&&a({content:v,location:p,imageData:b}),null===p&&null===f||r(h),window.requestAnimationFrame(c({lastScanned:u,contentBefore:null!=v?v:l,locationBefore:p})),o.n=3;break;case 2:window.requestAnimationFrame(c(t));case 3:return o.a(2)}}),s)})));return function(e){return u.apply(this,arguments)}}()};c({contentBefore:null,locationBefore:null,lastScanned:performance.now()})()}(this.$refs.video,{detectHandler:function(t){e.onDetect(Promise.resolve(t))},locateHandler:this.onLocate,minDelay:this.scanInterval})},beforeResetCamera:function(){null!==this.cameraInstance&&(this.cameraInstance.stop(),this.cameraInstance=null)},onLocate:function(e){var t=this.$refs.trackingLayer,n=this.$refs.video;if(void 0!==t)if(e.length>0&&void 0!==this.track&&void 0!==n){var a=n.offsetWidth,r=n.offsetHeight,i=n.videoWidth,o=n.videoHeight,s=Math.max(a/i,r/o),u=i*s,d=o*s,l=u/i,f=d/o,h=(a-u)/2,m=(r-d)/2,v=function(e){var t=e.x,n=e.y;return{x:Math.floor(t*l),y:Math.floor(n*f)}},p=function(e){var t=e.x,n=e.y;return{x:Math.floor(t+h),y:Math.floor(n+m)}},b=e.map((function(e){var t=e.boundingBox,n=e.cornerPoints,a=p(v({x:t.x,y:t.y})),r=a.x,i=a.y,o=v({x:t.width,y:t.height}),s=o.x,u=o.y;return Object(c.a)(Object(c.a)({},e),{},{cornerPoints:n.map((function(e){return p(v(e))})),boundingBox:DOMRectReadOnly.fromRect({x:r,y:i,width:s,height:u})})}));t.width=n.offsetWidth,t.height=n.offsetHeight;var w=t.getContext("2d");this.track(b,w)}else this.clearCanvas(t)},repaintTrackingLayer:function(e,t,n){var a=this,r=t.getContext("2d");window.requestAnimationFrame((function(){t.width=displayWidth,t.height=displayHeight,a.trackRepaintFunction(coordinatesAdjusted,r)}))},clearCanvas:function(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}}},H=(n(527),Object(F.a)(E,(function(){var e=this._self._c;return e("div",{staticClass:"qrcode-stream-wrapper"},[e("video",{ref:"video",staticClass:"qrcode-stream-camera",class:{"qrcode-stream-camera--hidden":!this.shouldScan},attrs:{autoplay:"",muted:"",playsinline:""},domProps:{muted:!0}}),this._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:!this.shouldScan,expression:"!shouldScan"}],ref:"pauseFrame",staticClass:"qrcode-stream-camera"}),this._v(" "),e("canvas",{ref:"trackingLayer",staticClass:"qrcode-stream-overlay"}),this._v(" "),e("div",{staticClass:"qrcode-stream-overlay"},[this._t("default")],2)])}),[],!1,null,"1dc5c71d",null).exports),M=n(76),U={name:"qrcode-capture",mixins:[T],methods:{onChangeInput:function(e){Object(M.a)(e.target.files).map(j).forEach(this.onDetect)}}},$=Object(F.a)(U,(function(){return(0,this._self._c)("input",{attrs:{type:"file",name:"image",accept:"image/*",capture:"environment",multiple:""},on:{change:this.onChangeInput}})}),[],!1,null,null,null).exports,W={name:"qrcode-drop-zone",mixins:[T],methods:{onDragOver:function(e){this.$emit("dragover",e)},onDrop:function(e){var t=this,n=e.dataTransfer;this.onDragOver(!1);var a=Object(M.a)(n.files),r=n.getData("text/uri-list");a.forEach((function(e){t.onDetect(j(e))})),""!==r&&this.onDetect(k(r))}}},V=Object(F.a)(W,(function(){var e=this;return(0,e._self._c)("div",{on:{drop:function(t){return t.preventDefault(),t.stopPropagation(),e.onDrop.apply(null,arguments)},dragenter:function(t){return t.preventDefault(),t.stopPropagation(),e.onDragOver(!0)},dragleave:function(t){return t.preventDefault(),t.stopPropagation(),e.onDragOver(!1)},dragover:function(e){e.preventDefault(),e.stopPropagation()}}},[e._t("default")],2)}),[],!1,null,null,null).exports;var A={install:function(e){e.component("qrcode-stream",H),e.component("qrcode-capture",$),e.component("qrcode-drop-zone",V)}},z=null;"undefined"!=typeof window?z=window.Vue:"undefined"!=typeof global&&(z=global.Vue),z&&z.use(A)},484:function(e,t,n){},527:function(e,t,n){"use strict";n(484)}}]);